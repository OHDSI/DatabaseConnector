<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Insert a table on the server — insertTable • DatabaseConnector</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Insert a table on the server — insertTable" />
<meta property="og:description" content="This function sends the data in a data frame or ffdf to a table on the server. Either a new table
is created, or the data is appended to an existing table." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DatabaseConnector</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/UsingDatabaseConnector.html">Using DatabaseConnector</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OHDSI/DatabaseConnector">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Insert a table on the server</h1>
    <small class="dont-index">Source: <a href='https://github.com/OHDSI/DatabaseConnector/blob/master/R/InsertTable.R'><code>R/InsertTable.R</code></a></small>
    <div class="hidden name"><code>insertTable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function sends the data in a data frame or ffdf to a table on the server. Either a new table
is created, or the data is appended to an existing table.</p>
    </div>

    <pre class="usage"><span class='fu'>insertTable</span>(<span class='no'>connection</span>, <span class='no'>tableName</span>, <span class='no'>data</span>, <span class='kw'>dropTableIfExists</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>createTable</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>tempTable</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>oracleTempSchema</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>useMppBulkLoad</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>progressBar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>camelCaseToSnakeCase</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>connection</th>
      <td><p>The connection to the database server.</p></td>
    </tr>
    <tr>
      <th>tableName</th>
      <td><p>The name of the table where the data should be inserted.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>The data frame or ffdf containing the data to be inserted.</p></td>
    </tr>
    <tr>
      <th>dropTableIfExists</th>
      <td><p>Drop the table if the table already exists before writing?</p></td>
    </tr>
    <tr>
      <th>createTable</th>
      <td><p>Create a new table? If false, will append to existing table.</p></td>
    </tr>
    <tr>
      <th>tempTable</th>
      <td><p>Should the table created as a temp table?</p></td>
    </tr>
    <tr>
      <th>oracleTempSchema</th>
      <td><p>Specifically for Oracle, a schema with write priviliges where temp tables
can be created.</p></td>
    </tr>
    <tr>
      <th>useMppBulkLoad</th>
      <td><p>If using Redshift or PDW, use more performant bulk loading techniques.
Setting the system environment variable "USE_MPP_BULK_LOAD" to TRUE is
another way to enable this mode. Please note, Redshift requires valid S3
credentials; PDW requires valid DWLoader installation. This can only be
used for permanent tables, and cannot be used to append to an existing
table.</p></td>
    </tr>
    <tr>
      <th>progressBar</th>
      <td><p>Show a progress bar when uploading?</p></td>
    </tr>
    <tr>
      <th>camelCaseToSnakeCase</th>
      <td><p>If TRUE, the data frame column names are assumed to use camelCase and
are converted to snake_case before uploading.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function sends the data in a data frame to a table on the server. Either a new table is
created, or the data is appended to an existing table. NA values are inserted as null values in the
database. If using Redshift or PDW, bulk uploading
techniques may be more performant than relying upon a batch of insert statements, depending upon
data size and network throughput. Redshift: The MPP bulk loading relies upon the CloudyR S3 library
to test a connection to an S3 bucket using AWS S3 credentials. Credentials are configured either
directly into the System Environment using the following keys: Sys.setenv("AWS_ACCESS_KEY_ID" =
"some_access_key_id", "AWS_SECRET_ACCESS_KEY" = "some_secret_access_key", "AWS_DEFAULT_REGION" =
"some_aws_region", "AWS_BUCKET_NAME" = "some_bucket_name", "AWS_OBJECT_KEY" = "some_object_key",
"AWS_SSE_TYPE" = "server_side_encryption_type") PDW: The MPP bulk loading relies upon the client
having a Windows OS and the DWLoader exe installed, and the following permissions granted: --Grant
BULK Load permissions - needed at a server level USE master; GRANT ADMINISTER BULK OPERATIONS TO
user; --Grant Staging database permissions - we will use the user db. USE scratch; EXEC
sp_addrolemember 'db_ddladmin', user;
Set the R environment variable DWLOADER_PATH to the location of the binary.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>connectionDetails</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='createConnectionDetails.html'>createConnectionDetails</a></span>(<span class='kw'>dbms</span> <span class='kw'>=</span> <span class='st'>"mysql"</span>,
                                             <span class='kw'>server</span> <span class='kw'>=</span> <span class='st'>"localhost"</span>,
                                             <span class='kw'>user</span> <span class='kw'>=</span> <span class='st'>"root"</span>,
                                             <span class='kw'>password</span> <span class='kw'>=</span> <span class='st'>"blah"</span>,
                                             <span class='kw'>schema</span> <span class='kw'>=</span> <span class='st'>"cdm_v5"</span>)
<span class='no'>conn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='connect.html'>connect</a></span>(<span class='no'>connectionDetails</span>)
<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>), <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>))
<span class='fu'>insertTable</span>(<span class='no'>conn</span>, <span class='st'>"my_table"</span>, <span class='no'>data</span>)
<span class='fu'><a href='disconnect.html'>disconnect</a></span>(<span class='no'>conn</span>)

<span class='co'>## bulk data insert with Redshift or PDW</span>
<span class='no'>connectionDetails</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='createConnectionDetails.html'>createConnectionDetails</a></span>(<span class='kw'>dbms</span> <span class='kw'>=</span> <span class='st'>"redshift"</span>,
                                             <span class='kw'>server</span> <span class='kw'>=</span> <span class='st'>"localhost"</span>,
                                             <span class='kw'>user</span> <span class='kw'>=</span> <span class='st'>"root"</span>,
                                             <span class='kw'>password</span> <span class='kw'>=</span> <span class='st'>"blah"</span>,
                                             <span class='kw'>schema</span> <span class='kw'>=</span> <span class='st'>"cdm_v5"</span>)
<span class='no'>conn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='connect.html'>connect</a></span>(<span class='no'>connectionDetails</span>)
<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>), <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>))
<span class='fu'>insertTable</span>(<span class='kw'>connection</span> <span class='kw'>=</span> <span class='no'>connection</span>,
            <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>"scratch.somedata"</span>,
            <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data</span>,
            <span class='kw'>dropTableIfExists</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
            <span class='kw'>createTable</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
            <span class='kw'>tempTable</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
            <span class='kw'>useMppBulkLoad</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)  <span class='co'># or, Sys.setenv('USE_MPP_BULK_LOAD' = TRUE)</span>
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martijn Schuemie, Marc Suchard.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


